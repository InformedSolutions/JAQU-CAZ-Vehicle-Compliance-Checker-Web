- title_and_header = 'Clean Air Zone charge'
= content_for(:title, title_and_header)
= link_to 'Back', confirm_details_vehicle_checkers_path, class: 'govuk-back-link', id: 'back-link'

%main.govuk-main-wrapper#main-content{role: 'main'}
  .govuk-grid-row
    .govuk-grid-column-two-thirds
      %h1.govuk-heading-l
        = title_and_header
      .govuk-error-summary{style: 'border-color:#0b0c0c'}
        %h2.govuk-error-summary__title.govuk-heading-m#error-summary-title Important information about vehicle data
        %p
          The data accuracy of this service is always improving. It is recommended you
          recheck your vehicle shortly before you intend to drive in any Clean Air Zones.

      %p
        Vehicle registration
        = succeed '.' do
          %strong= @vrn

      %table.govuk-table
        %thead.govuk-table__head
          %tr.govuk-table__row
            %th.govuk-table__header{scope: 'col', 'aria-sort': 'ascending'}
              = button_tag 'Clean Air Zone', data: {index: 0}, type: 'button'
            %th.govuk-table__header{scope: 'col', 'aria-sort': 'none'}
              = button_tag 'Daily charge', data: {index: 1}, type: 'button'
            %th.govuk-table__header{scope: 'col', 'aria-sort': 'none'}
              = button_tag 'Charging starts', data: {index: 2}, type: 'button'
            %th.govuk-table__header{scope: 'col', 'aria-sort': 'none'}
              = button_tag 'Map', data: {index: 3}, type: 'button'
            %th.govuk-table__header{scope: 'col', 'aria-sort': 'none'}
              = button_tag 'Further information', data: {index: 4}, type: 'button'
        %tbody.govuk-table__body
          %tr.govuk-table__row
            %td.govuk-table__cell Bath
            %td.govuk-table__cell Cath
            %td.govuk-table__cell Dath
            %td.govuk-table__cell Eath
            %td.govuk-table__cell Fath
          %tr.govuk-table__row
            %td.govuk-table__cell Gath 1
            %td.govuk-table__cell Aath 1
            %td.govuk-table__cell Cath 1
            %td.govuk-table__cell Dath 1
            %td.govuk-table__cell Bath 1
          %tr.govuk-table__row
            %td.govuk-table__cell Xath 2
            %td.govuk-table__cell Dath 2
            %td.govuk-table__cell Aath 2
            %td.govuk-table__cell Gath 2
            %td.govuk-table__cell Hath 2

      - @compliance_outcomes.each do |details|
        %h2.govuk-heading-l{id: details.html_id}
          = details.zone_name
        - if details.charged?
          %p.h2.govuk-heading-m You do not have to pay the charge until early 2021
          %p{id: "charged-title-#{details.html_id}"}
            The vehicle is subject to a daily charge of
            %strong #{details.charge}
          %p This vehicle does not meet the emission standards in #{details.zone_name}
          %p
            If your vehicle is subject to a charge you may still be eligible for an exemption or
            discount,
            = succeed '.' do
              = external_link_to "find out if you qualify in #{details.zone_name}",
                                 details.exemption_or_discount_url,
                                 id: "qualify-url-#{details.html_id}"
          %p
            The zone will operate 24 hours a day, 7 days a week, every day of the year.

          %h2.govuk-heading-m
            What you can do
          %ul.govuk-list.govuk-list--bullet
            %li
              = external_link_to "Get support to upgrade or replace your vehicle in #{details.zone_name}",
                                 details.become_compliant_url,
                                 id: "become-compliant-url-#{details.html_id}"
            %li
              = external_link_to "Explore cycling and public transport options in #{details.zone_name}",
                                 details.public_transport_options_url,
                                 id: "public-transport-options-url-#{details.html_id}"
        - else
          - if details.retrofit
            %p{id: "uncharged-title-#{details.html_id}"}
              The vehicle has been retrofitted to a compliant standard and will not be charged.
          - else
            %p{id: "uncharged-title-#{details.html_id}"}
              The vehicle will not be charged.
          %p
            There is no charge for driving in
            = external_link_to "#{details.zone_name} Clean Air Zone",
                               details.main_info_url,
                               id: "no-charge-in-#{details.html_id}-url"
          %p
            Each Clean Air Zone (CAZ) has different guidance for charging vehicles. Find out more about
            = external_link_to 'different types of Clean Air Zones',
                               'https://www.gov.uk/guidance/driving-in-a-clean-air-zone',
                               id: "guidance-url-#{details.html_id}"

      = render 'go_ultra_low_icon'
      = render 'common/print_page'

    .govuk-grid-column-one-third
      %aside#related-items-label.app-related-items{role: 'complementary'}
        %h2.govuk-heading-m
          Related tasks
        %nav{'aria-labelledby': 'related-items-label', role: 'navigation'}
          %ul.govuk-list{class: 'govuk-!-font-size-16'}
            %li
              = link_to 'Check another vehicle',
                        enter_details_vehicle_checkers_path,
                        id: 'check-another-vrn-url'
            %li
              = link_to 'Contact Clean Air Zones',
                        contact_forms_path,
                        id: 'contact-form-url'
:javascript
  new MOJFrontend.SortableTable({
      table: [
          $('table')[0]
      ]
  });
