= link_to 'Back', confirm_details_vehicle_checkers_path(vrn: params[:vrn]), class: 'govuk-back-link'
%main.govuk-main-wrapper#main-content{role: 'main'}
  - if @error
    .govuk-error-summary{"aria-labelledby" => "error-summary-title", "data-module" => "error-summary", role: "alert", tabindex: "-1"}
      %h2#error-summary-title.govuk-error-summary__title
        There is a problem
      .govuk-error-summary__body
        %ul.govuk-list.govuk-error-summary__list
          %li
            %a{href: "#caz-select-error"}= @error

  .govuk-grid-row
    .govuk-grid-column-two-thirds
      = form_tag compliance_air_zones_path, method: :get do
        .govuk-form-group{class: ('govuk-form-group--error' if @error)}
          %fieldset.govuk-fieldset{"aria-describedby" => "cazHint"}
            %legend.govuk-fieldset__legend.govuk-fieldset__legend--l
              %h1.govuk-fieldset__heading
                Where do you want to drive?
            %span#cazHint.govuk-hint
              Select all locations that apply.
            - if @error
              %span#caz-select-error.govuk-error-message
                %span.govuk-visually-hidden Error:
                Select at least one Clean Air Zone
            %input{name: 'vrn', type: 'hidden', value: params[:vrn]}
            .govuk-checkboxes
              - @clean_air_zones.each_with_index do |zone, index|
                .govuk-checkboxes__item
                  %input.govuk-checkboxes__input{name: "caz[]", type: 'checkbox', value: zone.id, id: "caz-#{index}" }
                  %label.govuk-label.govuk-checkboxes__label{for: "caz-#{index}"}
                    = zone.name
                    = link_to '(see boundary)', zone.boundary_url, target: "_blank"

        %button.govuk-button{type: 'submit'}
          Continue
